name: ğŸ’¾ Cache music files

on: workflow_dispatch

jobs:
  build-linux-executable:
    name: ğŸ”¨ Build Linux executable
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ‘ Checkout
        uses: actions/checkout@v4

      - name: ğŸ§„ Use Bun
        uses: oven-sh/setup-bun@v1

      - name: Setup FFmpeg
        uses: AnimMouse/setup-ffmpeg@v1

      - name: â¬‡ï¸ Clone Himnario API
        run: git clone https://github.com/qhariN/himnario-adventista-api.git

      - name: ğŸ”¨ Build cantado music files
        run: bun scripts/download-music-files.ts

      - name: ğŸ”¨ Build instrumental music files
        run: bun scripts/download-music-files.ts --instrumental

      - name: ğŸ’¾ Save cantado files
        uses: actions/cache/save@v4
        with:
          path: cantado
          key: cantado

      - name: ğŸ’¾ Save instrumental files
        uses: actions/cache/save@v4
        with:
          path: instrumental
          key: instrumental